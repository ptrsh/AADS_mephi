# Лабораторная работа № 5 «Разработка функций на языке Ассемблера и встраивание их в программы на языке C»

## Введение

Целью данной работы является изучение взаимодействия кода на языке C и на языке Ассемблера. Данный аспект является
крайне важным, т. к. обычно программы стараются делать максимально переносимыми, при этом затрачивая на разработку
минимальное время.

Для выполнения данной лабораторной работы необходимо:

1. Разработать программу на языке C, реализующую требуемую функциональность.
2. Провести анализ производительности программы, собранной со следующими настройками оптимизатора (режим отладки должен
   быть выключен):
    - `-O0`;
    - `-O1`;
    - `-O2`;
    - `-O3`;
    - `-Ofast`.
3. Реализовать основную функцию обработки изображения на языке Ассемблера.
4. Провести анализ производительности полученной программы.

## Примечания

1. Имена входного и выходного файлов должны передаваться в программу через аргументы командной строки.
2. Программа должна проверять наличие и корректность входных файлов, корректность задания исходных данных, и т.д.
3. Программа на языке C должна содержать функцию, выполняющую основную обработку изображения, которое находится в
   некотором буфере.
4. Функция, выполняющая основную обработку изображения, не может использовать никакие библиотечные функции.
5. Реализация ассемблерной функции, выполняющей основную обработку изображения, должна находиться в отдельном файле с
   расширением .s.
6. При работе с файлами (чтение/запись), содержащими графическое изображение, рекомендуется использовать готовые
   библиотеки на языке C.
7. Анализ производительности должен осуществляться на нескольких примерах, его результаты должны быть представлены в
   виде таблицы.

## Задание

Представить цветное изображение в оттенках серого, воспользовавшись алгоритмом Desaturation:

$$ Gray = \frac{Max(Red,Green,Blue) + Min(Red,Green,Blue)}{2} $$

## Формат входных и выходных данных

Изображение в формате BMP.

## Анализ производительности (в секундах)

|   Mode   | 798 KB | 58.2 MB | 931 MB |
|:--------:|--------|---------|--------|
|  `-O0`   | 0.047  | 1.679   | 25.882 |
|  `-O1`   | 0.041  | 1.142   | 16.759 |
|  `-O2`   | 0.040  | 0.900   | 13.935 |
|  `-O3`   | 0.040  | 0.860   | 11.794 |
| `-Ofast` | 0.798  | 11.713  | 11.713 |
|   ASM    | 0.668  | 9.786   | 9.786  |
